"use strict";$(function(){function t(t,e,n){var o=parseInt(t,10)-(x[e]?f:0)+(x[n]?f:0);return 65===e?o<0?0:o>s?s:o:87===e?o<0?0:o>p?p:o:void 0}function e(t,e,n){var o=parseInt(t,10)-(x[e]?f:0)+(x[n]?f:0);return 37===e?o<0?0:o>s?s:o:38===e?o<0?0:o>p?p:o:void 0}function n(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function o(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function i(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function h(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function r(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function a(t,e){return!(t.y+t.height<e.y||t.y>e.y+e.height||t.x+t.width<e.x||t.x>e.x+e.width)}function d(){w.length>m.length?$(".showWinner").text("Player One Wins"):w.length<m.length?$(".showWinner").text("Player Two Wins"):$(".showWinner").text("It's a draw")}function l(){0===b?(clearTimeout(C),$(".gameScreen").remove(),$("#gameOverDiv").removeClass("noshow"),d()):(I.innerHTML=b+" seconds remaining",b--)}var u=$("#gameBoard"),g=$(".boxP1"),c=$(".boxP2"),s=u.width()-g.width(),p=u.height()-c.height(),x={},f=20,w=[],m=[],y=200,v=200,B=30;!function(){for(var t=1;t<y;){var e=(Math.random()*($("#gameBoard").width()-20)).toFixed(),n=(Math.random()*($("#gameBoard").height()-20)).toFixed();$('<div class="ball "></div>').css({left:e+"px",top:n+"px"}).appendTo("#gameBoard").clone().delay(2e3).fadeIn(100),t++}}(),function(){for(var t=1;t<B;){var e=(Math.random()*($("#gameBoard").width()-20)).toFixed(),n=(Math.random()*($("#gameBoard").height()-20)).toFixed();$('<div class="bigBall"></div>').css({left:e+"px",top:n+"px"}).appendTo("#gameBoard").clone().delay(2e3).fadeIn(100),t++}}(),function(){for(var t=1;t<v;){var e=(Math.random()*($("#gameBoard").width()-20)).toFixed(),n=(Math.random()*($("#gameBoard").height()-20)).toFixed();$('<div class="badball"></div>').css({left:e+"px",top:n+"px"}).appendTo("#gameBoard").clone().delay(2e3).fadeIn(100),t++}}(),$(window).keydown(function(d){x[d.which]=!0;var l={x:g.position().left,y:g.position().top,width:g.width(),height:g.height()},u={x:c.position().left,y:c.position().top,width:c.width(),height:c.height()};$(".badball").each(function(t,e){var n={x:$(e).position().left,y:$(e).position().top,width:$(e).width(),height:$(e).height()};i(l,n)&&($("#p1Counter").html(function(t,e){return e-1}),$(e).remove(),w.pop(),console.log(w.length)),h(u,n)&&($("#p2Counter").html(function(t,e){return e-1}),$(e).remove(),m.pop(),console.log(m.length))}),$(".ball").each(function(t,e){var i={x:$(e).position().left,y:$(e).position().top,width:$(e).width(),height:$(e).height()};n(l,i)&&($("#p1Counter").html(function(t,e){return+e+1}),$(e).remove(),w.push("ball"),console.log(w.length)),o(u,i)&&($("#p2Counter").html(function(t,e){return+e+1}),$(e).remove(),m.push("ball"),console.log(m.length))}),$(".bigBall").each(function(t,e){var n={x:$(e).position().left,y:$(e).position().top,width:$(e).width(),height:$(e).height()};r(l,n)&&($("#p1Counter").html(function(t,e){return+e+2}),$(e).remove(),w.push(NaN),console.log(w.length)),a(u,n)&&($("#p2Counter").html(function(t,e){return+e+2}),$(e).remove(),m.push(NaN),console.log(m.length))}),g.css({left:function(e,n){return t(n,65,68)},top:function(e,n){return t(n,87,83)}}),c.css({left:function(t,n){return e(n,37,39)},top:function(t,n){return e(n,38,40)}})}),$(window).keyup(function(t){x[t.which]=!1});var b=2e5,I=document.getElementById("countDownTimer"),C=setInterval(l,1e3)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwibmV3TG9jYXRpb25QMSIsInYiLCJhIiwiYiIsIm4iLCJwYXJzZUludCIsImQiLCJ4Iiwid2lkdGgiLCJoZWlnaHQiLCJuZXdMb2NhdGlvblAyIiwiaXNDb2xsaWRlUDEiLCJ5IiwiaXNDb2xsaWRlUDIiLCJpc0JhZENvbGxpZGVQMSIsImMiLCJpc0JhZENvbGxpZGVQMiIsInMiLCJpc0JpZ0NvbGxpZGVQMiIsIndoaWNoIiwiYm94UDEiLCJwb3NpdGlvbiIsInRvcCIsImJpZyIsImJveFAyIiwiYmFkYmFsbCIsImNoZWNrV2lubmVyIiwicDFzY29yZSIsImxlbmd0aCIsInAyc2NvcmUiLCJ0ZXh0IiwiY291bnRkb3duIiwidGltZUxlZnQiLCJjbGVhclRpbWVvdXQiLCJ0aW1lcklkIiwicmVtb3ZlIiwicmVtb3ZlQ2xhc3MiLCJlbGVtIiwiaW5uZXJIVE1MIiwiZ2FtZUJvYXJkIiwibnVtT2ZHb29kRG90cyIsIm1ha2VEaXYiLCJjb3VudCIsInRvRml4ZWQiLCJkaXZzaXplIiwicmFuZG9tIiwiTWF0aCIsImNzcyIsImxlZnQiLCJwb3N5IiwiJG5ld2RpdiIsImFwcGVuZFRvIiwiY2xvbmUiLCJkZWxheSIsImZhZGVJbiIsIm1ha2VCaWdEaXYiLCJudW1PZkJpZ0RvdHMiLCIkbmV3QmlnZGl2IiwibWFrZUJhZERpdiIsIm51bU9mQmFkRG90cyIsIiRuZXdCYWRkaXYiLCJ3aW5kb3ciLCJrZXlkb3duIiwiZSIsImNvbnNvbGUiLCJlYWNoIiwiaHRtbCIsImkiLCJ2YWwiLCJiYWxsIiwicG9wIiwibG9nIiwiYmlnYmFsbCIsImluZGV4IiwicHVzaCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJrZXl1cCIsInNldEludGVydmFsIl0sIm1hcHBpbmdzIjoiWUFBQUEsR0FBRSxXQW1CQSxRQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxHQUdFLEdBQU1DLEdBQUlDLFNBQVNKLEVBQUcsS0FBT0ssRUFBRUosR0FBS0ss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LEdBQUEsU0ExQkRGLEVBQUU4RCxRQUFRZ0IsTUFBTSxTQUFTZCxHQUN2QnpELEVBQUV5RCxFQUFFNUMsUUFBUyxHQVlmLElBQUlhLEdBQVcsSUFDVEssRUFBT3NDLFNBQVNDLGVBQWUsa0JBQy9CMUMsRUFBVTRDLFlBQVkvQyxFQUFXIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuXG4gIGNvbnN0IGdhbWVCb2FyZCA9ICQoJyNnYW1lQm9hcmQnKTtcbiAgY29uc3QgIGJveFAxID0gJCgnLmJveFAxJyk7XG4gIGNvbnN0ICBib3hQMiA9ICQoJy5ib3hQMicpO1xuICBjb25zdCAgd2lkdGggPSBnYW1lQm9hcmQud2lkdGgoKSAtIGJveFAxLndpZHRoKCk7XG4gIGNvbnN0ICBoZWlnaHQgPSBnYW1lQm9hcmQuaGVpZ2h0KCkgLSBib3hQMi5oZWlnaHQoKTtcbiAgY29uc3QgIGQgPSB7fTtcbiAgY29uc3QgIHggPSAyMCA7XG4gIGNvbnN0IHAxc2NvcmUgPSBbXTtcbiAgY29uc3QgcDJzY29yZSA9IFtdO1xuICBjb25zdCBudW1PZkdvb2REb3RzID0gMjAwO1xuICBjb25zdCBudW1PZkJhZERvdHMgPSAyMDA7XG4gIGNvbnN0IG51bU9mQmlnRG90cyA9IDMwO1xuICAvLyB2ID0gb3JnaW5pbmFsIHZhbHVlLlxuICAvLyBhLGIgPSBkaXJlY3Rpb25cbiAgLy8gZCBpcyBvYmplY3QgaG9sZGluZyB0cnVlIG9yIGZhc2UgYWJvdXQga2V5IHByZXNzXG4gIC8vIHBhcnNlSW50IHR1cm5zIHB4IGludG8gSW50IGlzaW5nIDEwIG9yIHNvbWV0aGluZyByYWRpeCBzdHVmZlxuICAvLyBuID0gY2hlY2sgZm9yIHZhbGlkIG1vdmVtZW50XG4gIC8vIHggPSBwaXhhbCBqdW1wXG5cbiAgZnVuY3Rpb24gbmV3TG9jYXRpb25QMSh2LGEsYikge1xuICAgIGNvbnN0IG4gPSBwYXJzZUludCh2LCAxMCkgLSAoZFthXSA/IHggOiAwKSArIChkW2JdID8geCA6IDApO1xuICAgIGlmIChhID09PSA2NSkgcmV0dXJuICAgbiA8IDAgPyAwIDogbiA+IHdpZHRoID8gd2lkdGggOiBuO1xuICAgIGlmIChhID09PSA4NykgcmV0dXJuIG4gPCAwID8gMCA6IG4gPiBoZWlnaHQgPyBoZWlnaHQgOiBuO1xuICB9XG4gIGZ1bmN0aW9uIG5ld0xvY2F0aW9uUDIodixhLGIpIHtcbiAgICBjb25zdCBuID0gcGFyc2VJbnQodiwgMTApIC0gKGRbYV0gPyB4IDogMCkgKyAoZFtiXSA/IHggOiAwKTtcbiAgICBpZiAoYSA9PT0gMzcpIHJldHVybiBuIDwgMCA/IDAgOiBuID4gd2lkdGggPyB3aWR0aCA6IG47XG4gICAgaWYgKGEgPT09IDM4KSByZXR1cm4gbiA8IDAgPyAwIDogbiA+IGhlaWdodCA/IGhlaWdodCA6IG47XG4gIH1cblxuICAvLyBtYWtlcyByYW5kb20gYW1vdW50cyBvZiBkaXYgb24gdGhlIHBhZ2VcbiAgbWFrZURpdigpO1xuICBmdW5jdGlvbiBtYWtlRGl2KCkge1xuICAgIHZhciAgY291bnQgPSAxO1xuICAgIHdoaWxlIChjb3VudCA8IG51bU9mR29vZERvdHMpe1xuICAgICAgY29uc3QgZGl2c2l6ZSA9IDIwO1xuICAgICAgY29uc3QgcG9zeCA9IChNYXRoLnJhbmRvbSgpICogKCQoJyNnYW1lQm9hcmQnKS53aWR0aCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIHZhciBwb3N5ID0gKE1hdGgucmFuZG9tKCkgKiAoJCgnI2dhbWVCb2FyZCcpLmhlaWdodCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIGNvbnN0ICRuZXdkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiYmFsbCAnICsgJ1wiPjwvZGl2PicpLmNzcyh7XG4gICAgICAgICdsZWZ0JzogcG9zeCArICdweCcsXG4gICAgICAgICd0b3AnOiBwb3N5ICsgJ3B4J1xuICAgICAgfSk7XG4gICAgICAkbmV3ZGl2LmFwcGVuZFRvKCcjZ2FtZUJvYXJkJykuY2xvbmUoKS5kZWxheSgyMDAwKS5mYWRlSW4oMTAwKTtcbiAgICAgIGNvdW50ICsrO1xuICAgIH1cbiAgfVxuXG4gIG1ha2VCaWdEaXYoKTtcbiAgZnVuY3Rpb24gbWFrZUJpZ0RpdigpIHtcbiAgICB2YXIgIGNvdW50ID0gMTtcbiAgICB3aGlsZSAoY291bnQgPCBudW1PZkJpZ0RvdHMpe1xuICAgICAgY29uc3QgZGl2c2l6ZSA9IDIwO1xuICAgICAgY29uc3QgcG9zeCA9IChNYXRoLnJhbmRvbSgpICogKCQoJyNnYW1lQm9hcmQnKS53aWR0aCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIHZhciBwb3N5ID0gKE1hdGgucmFuZG9tKCkgKiAoJCgnI2dhbWVCb2FyZCcpLmhlaWdodCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIGNvbnN0ICRuZXdCaWdkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiYmlnQmFsbFwiPjwvZGl2PicpLmNzcyh7XG4gICAgICAgICdsZWZ0JzogcG9zeCArICdweCcsXG4gICAgICAgICd0b3AnOiBwb3N5ICsgJ3B4J1xuICAgICAgfSk7XG4gICAgICAkbmV3QmlnZGl2LmFwcGVuZFRvKCcjZ2FtZUJvYXJkJykuY2xvbmUoKS5kZWxheSgyMDAwKS5mYWRlSW4oMTAwKTtcbiAgICAgIGNvdW50ICsrO1xuICAgIH1cbiAgfVxuXG4gIG1ha2VCYWREaXYoKTtcbiAgZnVuY3Rpb24gbWFrZUJhZERpdigpIHtcbiAgICB2YXIgIGNvdW50ID0gMTtcbiAgICB3aGlsZSAoY291bnQgPCBudW1PZkJhZERvdHMpe1xuICAgICAgY29uc3QgZGl2c2l6ZSA9IDIwO1xuICAgICAgY29uc3QgcG9zeCA9IChNYXRoLnJhbmRvbSgpICogKCQoJyNnYW1lQm9hcmQnKS53aWR0aCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIHZhciBwb3N5ID0gKE1hdGgucmFuZG9tKCkgKiAoJCgnI2dhbWVCb2FyZCcpLmhlaWdodCgpIC0gZGl2c2l6ZSkpLnRvRml4ZWQoKTtcbiAgICAgIGNvbnN0ICRuZXdCYWRkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiYmFkYmFsbFwiPjwvZGl2PicpLmNzcyh7XG4gICAgICAgICdsZWZ0JzogcG9zeCArICdweCcsXG4gICAgICAgICd0b3AnOiBwb3N5ICsgJ3B4J1xuICAgICAgfSk7XG4gICAgICAkbmV3QmFkZGl2LmFwcGVuZFRvKCcjZ2FtZUJvYXJkJykuY2xvbmUoKS5kZWxheSgyMDAwKS5mYWRlSW4oMTAwKTtcbiAgICAgIGNvdW50ICsrO1xuICAgIH1cbiAgfVxuXG5cbiAgZnVuY3Rpb24gaXNDb2xsaWRlUDEoYSwgYikge1xuICAgIHJldHVybiAhKFxuICAgICAgKChhLnkgKyBhLmhlaWdodCkgPCAoYi55KSkgfHxcbiAgICAgIChhLnkgPiAoYi55ICsgYi5oZWlnaHQpKSB8fFxuICAgICAgKChhLnggKyBhLndpZHRoKSA8IGIueCkgfHxcbiAgICAgIChhLnggPiAoYi54ICsgYi53aWR0aCkpXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQ29sbGlkZVAyKGMsIGIpIHtcbiAgICByZXR1cm4gIShcbiAgICAgICgoYy55ICsgYy5oZWlnaHQpIDwgKGIueSkpIHx8XG4gICAgICAoYy55ID4gKGIueSArIGIuaGVpZ2h0KSkgfHxcbiAgICAgICgoYy54ICsgYy53aWR0aCkgPCBiLngpIHx8XG4gICAgICAoYy54ID4gKGIueCArIGIud2lkdGgpKVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0JhZENvbGxpZGVQMShhLCBzKSB7XG4gICAgcmV0dXJuICEoXG4gICAgICAoKGEueSArIGEuaGVpZ2h0KSA8IChzLnkpKSB8fFxuICAgICAgKGEueSA+IChzLnkgKyBzLmhlaWdodCkpIHx8XG4gICAgICAoKGEueCArIGEud2lkdGgpIDwgcy54KSB8fFxuICAgICAgKGEueCA+IChzLnggKyBzLndpZHRoKSlcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNCYWRDb2xsaWRlUDIoYywgcykge1xuICAgIHJldHVybiAhKFxuICAgICAgKChjLnkgKyBjLmhlaWdodCkgPCAocy55KSkgfHxcbiAgICAgIChjLnkgPiAocy55ICsgcy5oZWlnaHQpKSB8fFxuICAgICAgKChjLnggKyBjLndpZHRoKSA8IHMueCkgfHxcbiAgICAgIChjLnggPiAocy54ICsgcy53aWR0aCkpXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQmlnQ29sbGlkZVAxKGEsIGJpZykge1xuICAgIHJldHVybiAhKFxuICAgICAgKChhLnkgKyBhLmhlaWdodCkgPCAoYmlnLnkpKSB8fFxuICAgICAgKGEueSA+IChiaWcueSArIGJpZy5oZWlnaHQpKSB8fFxuICAgICAgKChhLnggKyBhLndpZHRoKSA8IGJpZy54KSB8fFxuICAgICAgKGEueCA+IChiaWcueCArIGJpZy53aWR0aCkpXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQmlnQ29sbGlkZVAyKGMsIGJpZykge1xuICAgIHJldHVybiAhKFxuICAgICAgKChjLnkgKyBjLmhlaWdodCkgPCAoYmlnLnkpKSB8fFxuICAgICAgKGMueSA+IChiaWcueSArIGJpZy5oZWlnaHQpKSB8fFxuICAgICAgKChjLnggKyBjLndpZHRoKSA8IGJpZy54KSB8fFxuICAgICAgKGMueCA+IChiaWcueCArIGJpZy53aWR0aCkpXG4gICAgKTtcbiAgfVxuXG4gIC8vbW92ZW1lbnQgdXNpbmcga2V5c1xuICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbihlKSB7XG4gICAgZFtlLndoaWNoXSA9IHRydWU7XG5cbiAgICBjb25zdCBhID0ge1xuICAgICAgeDogYm94UDEucG9zaXRpb24oKS5sZWZ0LFxuICAgICAgeTogYm94UDEucG9zaXRpb24oKS50b3AsXG4gICAgICB3aWR0aDogYm94UDEud2lkdGgoKSxcbiAgICAgIGhlaWdodDogYm94UDEuaGVpZ2h0KClcbiAgICB9O1xuXG4gICAgY29uc3QgYyA9IHtcbiAgICAgIHg6IGJveFAyLnBvc2l0aW9uKCkubGVmdCxcbiAgICAgIHk6IGJveFAyLnBvc2l0aW9uKCkudG9wLFxuICAgICAgd2lkdGg6IGJveFAyLndpZHRoKCksXG4gICAgICBoZWlnaHQ6IGJveFAyLmhlaWdodCgpXG4gICAgfTtcblxuLy9DaGVjayBmb3IgYmFkIGJhbGwgY29ubmVjdFxuICAgICQoJy5iYWRiYWxsJykuZWFjaCgoaW5kZXgsIGJhZGJhbGwpID0+IHtcbiAgICAgIGNvbnN0IHMgPSB7XG4gICAgICAgIHg6ICQoYmFkYmFsbCkucG9zaXRpb24oKS5sZWZ0LFxuICAgICAgICB5OiAkKGJhZGJhbGwpLnBvc2l0aW9uKCkudG9wLFxuICAgICAgICB3aWR0aDogJChiYWRiYWxsKS53aWR0aCgpLFxuICAgICAgICBoZWlnaHQ6ICQoYmFkYmFsbCkuaGVpZ2h0KClcbiAgICAgIH07XG5cbiAgICAgIGlmIChpc0JhZENvbGxpZGVQMShhLCBzKSkge1xuICAgICAgICAkKCcjcDFDb3VudGVyJykuaHRtbChmdW5jdGlvbihpLCB2YWwpIHtcbiAgICAgICAgICByZXR1cm4gdmFsLTE7XG4gICAgICAgIH0pO1xuICAgICAgICAkKGJhZGJhbGwpLnJlbW92ZSgpO1xuICAgICAgICBwMXNjb3JlLnBvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhwMXNjb3JlLmxlbmd0aCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0JhZENvbGxpZGVQMihjLCBzKSkge1xuICAgICAgICAkKCcjcDJDb3VudGVyJykuaHRtbChmdW5jdGlvbihpLCB2YWwpIHtcbiAgICAgICAgICByZXR1cm4gdmFsLTE7XG4gICAgICAgIH0pO1xuICAgICAgICAkKGJhZGJhbGwpLnJlbW92ZSgpO1xuICAgICAgICBwMnNjb3JlLnBvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhwMnNjb3JlLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfSk7XG4vL0NoZWNrIGZvciBiYWxsIGNvbm5lY3RcbiAgICAkKCcuYmFsbCcpLmVhY2goKGluZGV4LCBiYWxsKSA9PiB7XG4gICAgICBjb25zdCBiID0ge1xuICAgICAgICB4OiAkKGJhbGwpLnBvc2l0aW9uKCkubGVmdCxcbiAgICAgICAgeTogJChiYWxsKS5wb3NpdGlvbigpLnRvcCxcbiAgICAgICAgd2lkdGg6ICQoYmFsbCkud2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0OiAkKGJhbGwpLmhlaWdodCgpXG4gICAgICB9O1xuXG4gICAgICBpZiAoaXNDb2xsaWRlUDEoYSwgYikpIHtcbiAgICAgICAgJCgnI3AxQ291bnRlcicpLmh0bWwoZnVuY3Rpb24oaSwgdmFsKSB7XG4gICAgICAgICAgcmV0dXJuICt2YWwrMTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoYmFsbCkucmVtb3ZlKCk7XG4gICAgICAgIHAxc2NvcmUucHVzaCgnYmFsbCcpO1xuICAgICAgICBjb25zb2xlLmxvZyhwMXNjb3JlLmxlbmd0aCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0NvbGxpZGVQMihjLCBiKSkge1xuICAgICAgICAkKCcjcDJDb3VudGVyJykuaHRtbChmdW5jdGlvbihpLCB2YWwpIHtcbiAgICAgICAgICByZXR1cm4gK3ZhbCsxO1xuICAgICAgICB9KTtcbiAgICAgICAgJChiYWxsKS5yZW1vdmUoKTtcbiAgICAgICAgcDJzY29yZS5wdXNoKCdiYWxsJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKHAyc2NvcmUubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9KTtcbi8vQ2hlY2sgZm9yIGJpZyBiYWxsIGNvbm5lY3RcbiAgICAkKCcuYmlnQmFsbCcpLmVhY2goKGluZGV4LCBiaWdiYWxsKSA9PiB7XG4gICAgICBjb25zdCBiaWcgPSB7XG4gICAgICAgIHg6ICQoYmlnYmFsbCkucG9zaXRpb24oKS5sZWZ0LFxuICAgICAgICB5OiAkKGJpZ2JhbGwpLnBvc2l0aW9uKCkudG9wLFxuICAgICAgICB3aWR0aDogJChiaWdiYWxsKS53aWR0aCgpLFxuICAgICAgICBoZWlnaHQ6ICQoYmlnYmFsbCkuaGVpZ2h0KClcbiAgICAgIH07XG5cbiAgICAgIGlmIChpc0JpZ0NvbGxpZGVQMShhLCBiaWcpKSB7XG4gICAgICAgICQoJyNwMUNvdW50ZXInKS5odG1sKGZ1bmN0aW9uKGksIHZhbCkge1xuICAgICAgICAgIHJldHVybiArdmFsKzI7XG4gICAgICAgIH0pO1xuICAgICAgICAkKGJpZ2JhbGwpLnJlbW92ZSgpO1xuICAgICAgICBwMXNjb3JlLnB1c2goJ2JhbGwnICogMik7XG4gICAgICAgIGNvbnNvbGUubG9nKHAxc2NvcmUubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzQmlnQ29sbGlkZVAyKGMsIGJpZykpIHtcbiAgICAgICAgJCgnI3AyQ291bnRlcicpLmh0bWwoZnVuY3Rpb24oaSwgdmFsKSB7XG4gICAgICAgICAgcmV0dXJuICt2YWwrMjtcbiAgICAgICAgfSk7XG4gICAgICAgICQoYmlnYmFsbCkucmVtb3ZlKCk7XG4gICAgICAgIHAyc2NvcmUucHVzaCgnYmFsbCcgKiAyKTtcbiAgICAgICAgY29uc29sZS5sb2cocDJzY29yZS5sZW5ndGgpO1xuICAgICAgfVxuICAgIH0pO1xuXG5cblxuICAgIC8vIGJveCBtb3ZlbWVudCBjb250cm9sbHNcbiAgICBib3hQMS5jc3Moe1xuICAgICAgbGVmdDogZnVuY3Rpb24oaSx2KSB7XG4gICAgICAgIHJldHVybiBuZXdMb2NhdGlvblAxKHYsIDY1LCA2OCk7XG4gICAgICB9LFxuICAgICAgdG9wOiBmdW5jdGlvbihpLHYpIHtcbiAgICAgICAgcmV0dXJuIG5ld0xvY2F0aW9uUDEodiwgODcsIDgzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBib3hQMi5jc3Moe1xuICAgICAgbGVmdDogZnVuY3Rpb24oaSx2KSB7XG4gICAgICAgIHJldHVybiBuZXdMb2NhdGlvblAyKHYsIDM3LCAzOSk7XG4gICAgICB9LFxuICAgICAgdG9wOiBmdW5jdGlvbihpLHYpIHtcbiAgICAgICAgcmV0dXJuIG5ld0xvY2F0aW9uUDIodiwgMzgsIDQwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgJCh3aW5kb3cpLmtleXVwKGZ1bmN0aW9uKGUpIHtcbiAgICBkW2Uud2hpY2hdID0gZmFsc2U7XG4gIH0pO1xuXG4gIC8vY2hlY2tpbmcgZm9yIHdpbm5uZXIgZnVuY3Rpb25cbiAgZnVuY3Rpb24gY2hlY2tXaW5uZXIoKSB7XG4gICAgaWYgKHAxc2NvcmUubGVuZ3RoID4gcDJzY29yZS5sZW5ndGgpe1xuICAgICAgJCgnLnNob3dXaW5uZXInKS50ZXh0KCdQbGF5ZXIgT25lIFdpbnMnKTtcbiAgICB9IGVsc2UgaWYgKHAxc2NvcmUubGVuZ3RoIDwgcDJzY29yZS5sZW5ndGgpIHtcbiAgICAgICQoJy5zaG93V2lubmVyJykudGV4dCgnUGxheWVyIFR3byBXaW5zJyk7XG4gICAgfSBlbHNlICQoJy5zaG93V2lubmVyJykudGV4dCgnSXRcXCdzIGEgZHJhdycpO1xuICB9XG5cbiAgbGV0IHRpbWVMZWZ0ID0gMjAwMDAwO1xuICBjb25zdCBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50RG93blRpbWVyJyk7XG4gIGNvbnN0IHRpbWVySWQgPSBzZXRJbnRlcnZhbChjb3VudGRvd24sIDEwMDApO1xuICBmdW5jdGlvbiBjb3VudGRvd24oKSB7XG4gICAgaWYgKHRpbWVMZWZ0ID09PSAwKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgICAkKCcuZ2FtZVNjcmVlbicpLnJlbW92ZSgpO1xuICAgICAgJCgnI2dhbWVPdmVyRGl2JykucmVtb3ZlQ2xhc3MoJ25vc2hvdycpO1xuICAgICAgY2hlY2tXaW5uZXIoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbS5pbm5lckhUTUwgPSB0aW1lTGVmdCArICcgc2Vjb25kcyByZW1haW5pbmcnO1xuICAgICAgdGltZUxlZnQtLTtcbiAgICB9XG4gIH1cbn0pO1xuIl19
